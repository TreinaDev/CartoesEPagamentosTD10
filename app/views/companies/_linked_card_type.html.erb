<div class='w-100 d-flex align-items-center justify-content-between gap-3'>
  <div class='card-section'>
    <%= image_tag card_type.icon, alt: "Ícone cartão #{card_type.name}", class: 'card-icon' %>
    <div class='card-info'>
      <span class='title'><%= card_type.name %></span>

      <% status_color = company_card_type.active? ? 'active' : 'inactive' %>
      <span class=<%= status_color %>><%= CompanyCardType.human_attribute_name("status.#{company_card_type.status}") %></span>
    </div>
  </div>

  <% if company_card_type.active? %>
    <%= button_to t('.inactivate_card_type'), disable_company_card_type_path,
        method: :patch, class: 'btn btn-danger',
        params: params %>
  <% else %>
    <%= button_to t('.activate_card_type'), enable_company_card_type_path,
        method: :patch, class: 'btn btn-success',
        params: params %>
  <% end %>
</div>

<%= form_with model: company_card_type, class: '' do |f| %>
  <div class='w-100'>
    <%= f.label :cashback_rule_id %>
    <%= f.collection_select :cashback_rule_id, @cashback_rules, :id, :description, prompt: 'Escolha uma regra de cashback' %>
  </div>

  <div class='w-50'>
    <%= f.label :conversion_tax %>
    <%= f.number_field :conversion_tax, step: 0.01 %>
  </div>

  <%= f.hidden_field :card_type_id, value: card_type.id %>
  <%= f.hidden_field :cnpj, value: @company.registration_number %>
  <%= hidden_field_tag :company_id, @company.id %>
  
  <%= f.submit 'Salvar regra e taxa', class: 'btn btn-secondary' %>

<% end %>